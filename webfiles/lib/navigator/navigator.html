<!--
RetroWeb Browser
Copyright (C) 2014 Marcio Teixeira

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
-->
<style>
	#emulator-select {
		float: right;
		background: transparent;
		padding: 5px;
	}

	.navigator-panel {
		display: none;
	}

	.title-bar {
		padding: 5px;
	}

	.title-bar IMG {
		vertical-align: middle;
		width:  40px;
		height: 40px;
		opacity: 0.5;
	}

	.sidepanel-window {
		border-radius: 10px;
		opacity: 0.95;
		border-width: 1px;
		border-style: solid;
		border-color: #777;
		display: none;
		padding: 2px;
		background-color: #eef;
		box-shadow: 5px 5px 10px rgba(0,0,0,0.35);
	}

	.navigator {
		height: 80%;
	}

	#html-iframe {
		width: 100%;
		height: 100%;
	}

	/* Fancy fade effect for HTML viewer iframe */

	.fade-effect {
		position: relative;
		height: 90%;
	}

	.fade-effect-top {
		position: absolute;
		top: 0;
		left: 0;
		right: 15px;
		height: 25px;
		background: linear-gradient(#eef, rgba(255,255,255,0));
	}

	.fade-effect-bottom {
		position: absolute;
		bottom: 0;
		left: 0;
		right: 15px;
		height: 50px;
		background: linear-gradient(rgba(255,255,255,0),#eef);
	}
</style>

<template id="navigatorTemplate">
	<div id="navigator-panel" class="navigator sidepanel-window">
		<div class="title-bar">
			<select id="emulator-select" onchange="onEmulatorChange()">
				<option>Change computer type...</option>
			</select>
			<img class="btn-icon" src="/ui-artwork/appbar.close.svg" onclick="panels.close('navigator-panel');">
			<img class="btn-icon" src="/ui-artwork/appbar.arrow.left.svg" onclick="navGoBack()">
			<img class="btn-icon" src="/ui-artwork/appbar.home.svg" onclick="navGoHome()">
		</div>
		<div class="fade-effect">
			<iframe id="html-iframe" frameborder="0" seamless="seamless" scrolling="auto" src="about:blank">
			</iframe>
			<div class="fade-effect-top"></div>
			<div class="fade-effect-bottom"></div>
		</div>
	</div>
</template>

<template id="wikiTemplate">
	<link rel="stylesheet" type="text/css" href="/lib/navigator/docs.css">
	<link rel="stylesheet" type="text/css" href="/lib/navigator/icons.css">
	<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
	<script type="text/javascript" src="/lib/navigator/docs.js"></script>
	$WIKI_CONTENT
	<script type="text/javascript">
		parent.finishFormatting();
	</script>
</template>

<script type="text/javascript" src="/lib/wikify.js"></script>
<script type="text/javascript" src="/lib/navigator/navigator.js"></script>
<script type="text/javascript" src="/lib/navigator/navigator_json.js"></script>
<script type="text/javascript" src="/lib/navigator/navigator_icons.js"></script>

<script>
	// The following is requires for the webcomponents polyfill
	document._currentScript = document._currentScript || document.currentScript;
	
	// importDoc references this import's document
	var navImportDoc = document._currentScript.ownerDocument;
	
	// Navigator global variables
	var panels;
	
	function createNavigator(host) {
		var template = navImportDoc.getElementById('navigatorTemplate');
		var clone = document.importNode(template.content, true);
		host.appendChild(clone);
		
		// Initialize handler for dialog boxes
		panels = new PopupManager();
		panels.add("navigator-panel");
		panels.open("navigator-panel");
		panels.apply();
		
		// Start doing animation effects after the page loads
		setTimeout( function() {
			panels.setSpeed("fast");
		}, 1000);
		
		navAddPopStateHandler();
	}
</script>